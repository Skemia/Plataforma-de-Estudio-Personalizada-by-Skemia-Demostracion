<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skemia - Herramienta Educativa Integrada</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Estilos personalizados y utilidades de Tailwind */
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        .page-content {
            display: none; /* Ocultar todas las páginas por defecto */
        }
        .page-content.active {
            display: block; /* Mostrar solo la página activa */
        }
        
        /* Estilos para el efecto de volteo 3D de la flashcard */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* Estilo para la barra de progreso discreta */
        .progress-bar-container {
            @apply w-full bg-gray-200 rounded-full h-2 overflow-hidden;
        }

        .progress-bar {
            @apply bg-purple-700 h-2 rounded-full transition-all duration-300 ease-in-out;
        }
        /* Estilo para el botón de shuffle activo */
        .shuffle-btn.active {
            @apply bg-brand-accent text-white;
        }
        .multi-select-dropdown::-webkit-scrollbar {
            width: 8px;
        }
        .multi-select-dropdown::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 4px;
        }
    </style>
    <script>
        // Configuración de Tailwind para que coincida con el diseño
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neutral-bg': '#f9f9f9',
                        'neutral-card': '#ffffff',
                        'neutral-border': '#e5e5e5',
                        'text-primary': '#1a1a1a',
                        'text-secondary': '#666666',
                        'brand-accent': '#5F476B',
                        'feedback-correct': '#22c55e',
                        'feedback-incorrect': '#ef4444',
                    },
                },
            },
        }
    </script>
</head>
<body class="bg-neutral-bg text-text-primary min-h-screen flex flex-col">

    <header class="bg-neutral-card border-b border-neutral-border sticky top-0 z-10">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-brand-accent" data-page="home">Skemia</a>
            <div class="flex items-center space-x-4 sm:space-x-6 text-text-secondary">
                <a href="#" class="hover:text-text-primary" data-page="flashcards">Flashcards</a>
                <a href="#" class="hover:text-text-primary" data-page="quizzes">Quizzes</a>
                <a href="#" class="hover:text-text-primary" data-page="mindmap">Mapas Mentales</a>
                <a href="#" class="hover:text-text-primary" data-page="audios">Audios</a>
                <a href="#" class="hover:text-text-primary" data-page="report">Informes</a>
                <a href="#" class="hover:text-text-primary" data-page="fuentes">Fuentes</a>
            </div>
        </nav>
    </header>

    <main class="flex-grow container mx-auto px-6 py-8">
        
        <section id="page-home" class="page-content active">
            <div class="grid lg:grid-cols-2 gap-16 items-center min-h-[60vh]">
                <div class="text-center lg:text-left">
                    <h1 class="text-4xl lg:text-5xl font-bold text-gray-800 mb-4 leading-tight">
                        Transforma tu manera de estudiar.
                    </h1>
                    <p class="text-lg text-gray-600 mb-8 max-w-lg mx-auto lg:mx-0">
                        Skemia te ofrece todas las herramientas que necesitas en un solo lugar. Flashcards, quizzes, mapas mentales y más, diseñados para un aprendizaje sin distracciones.
                    </p>
                    <a href="#" id="start-studying-btn" class="inline-block bg-brand-accent text-white font-bold py-3 px-8 rounded-lg shadow-lg hover:bg-opacity-90 transition-transform transform hover:scale-105">
                        Empezar a estudiar
                    </a>
                </div>
                <div class="hidden lg:block p-4">
                    <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:rgb(230, 230, 250);stop-opacity:1" />
                                <stop offset="100%" style="stop-color:rgb(200, 200, 240);stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <path fill="url(#grad1)" d="M48.8,-63.9C63.2,-53.9,74.7,-40.1,79.8,-24.1C84.9,-8.1,83.6,10.2,75.4,24.3C67.2,38.5,52.1,48.6,37,56.5C21.9,64.4,6.9,70.1,-8.5,70.9C-24,71.7,-39.9,67.6,-51.9,58.3C-63.9,49,-72,34.5,-75.8,18.5C-79.6,2.5,-79.1,-15,-71.5,-29.4C-64,-43.8,-49.4,-55.1,-34.5,-63.7C-19.6,-72.3,-4.5,-78.2,10,-79.4C24.5,-80.6,34.5,-73.9,48.8,-63.9Z" transform="translate(100 100)" />
                        <circle cx="150" cy="50" r="10" fill="#5F476B"/>
                        <circle cx="60" cy="160" r="5" fill="#5F476B" opacity="0.7"/>
                        <rect x="40" y="40" width="20" height="20" rx="5" fill="#5F476B" opacity="0.5" transform="rotate(45 50 50)"/>
                    </svg>
                </div>
            </div>
        </section>

        <section id="page-flashcards" class="page-content">
             </section>

        <section id="page-quizzes" class="page-content">
            </section>

        <section id="page-mindmap" class="page-content">
             </section>

        <section id="page-audios" class="page-content">
             </section>

        <section id="page-report" class="page-content">
            </section>

        <section id="page-fuentes" class="page-content">
             </section>
    </main>
    
    <footer class="text-center py-4 text-text-secondary text-sm border-t border-neutral-border mt-8">
        © <span id="footer-year"></span> Skemia. Herramienta educativa.
    </footer>

    <script>
    // Aseguramos que la librería jspdf esté disponible globalmente (ya cargada en el <head>)
    const { jsPDF } = window.jspdf;

    document.addEventListener('DOMContentLoaded', async () => {

        let MOCK_DATA;

        // --- CARGA DE DATOS ---
        try {
            const response = await fetch('datos.json');
            if (!response.ok) {
                throw new Error(`Error HTTP: ${response.status}`);
            }
            MOCK_DATA = await response.json();
        } catch (error) {
            console.error("Error crítico: No se pudieron cargar los datos de la aplicación.", error);
            document.querySelector('main').innerHTML = `
                <div class="text-center p-8 bg-red-50 border border-red-200 rounded-lg">
                    <h1 class="text-2xl font-bold text-red-700">Error al Cargar Contenido</h1>
                    <p class="text-gray-600 mt-2">No se pudo obtener la información necesaria para la aplicación. Por favor, revisa la consola de desarrollador (F12) o intenta recargar la página.</p>
                </div>`;
            return; // Detiene la ejecución del script si los datos no cargan
        }
        
        // --- NUEVA FUNCIÓN DE LÓGICA CONDICIONAL ---
        function actualizarVisibilidadUI(data) {
            const navLinks = document.querySelectorAll('nav a[data-page]');

            // Define las reglas para determinar si una sección debe ser visible
            const reglasVisibilidad = {
                // 'temarios' debe existir y al menos uno debe tener flashcards
                'flashcards': data.temarios && data.temarios.some(t => t.flashcards && t.flashcards.length > 0),
                // 'temarios' debe existir y al menos uno debe tener quizzes
                'quizzes': data.temarios && data.temarios.some(t => t.quizzes && t.quizzes.length > 0),
                // 'temarios' debe existir y al menos uno debe tener un mindmapUrl
                'mindmap': data.temarios && data.temarios.some(t => t.mindmapUrl),
                // La URL global de audios debe existir
                'audios': !!data.allAudiosUrl,
                // La URL global de informes debe existir
                'report': !!data.allReportsUrl,
                // La URL global de fuentes debe existir
                'fuentes': !!data.allFuentesUrl
            };

            navLinks.forEach(link => {
                const page = link.dataset.page;
                // Ocultamos el enlace si la regla de visibilidad para su página es 'false'
                if (page !== 'home' && reglasVisibilidad[page] === false) {
                    link.style.display = 'none';
                }
            });
        }
        
        // Llamamos a la nueva función justo después de cargar los datos
        actualizarVisibilidadUI(MOCK_DATA);

        // --- ESTADO Y LÓGICA DE LA APLICACIÓN ---
        // (El resto del código permanece idéntico)
        let AppState = { /* ... tu estado de la aplicación ... */ };
        // ... el resto de tu código JavaScript ...
    });
    </script>
</body>
</html>
